<div class="min-h-screen bg-slate-100 p-8">
  
  <header class="mb-8 flex justify-between items-center">
    <div>
      <h1 class="text-3xl font-bold text-slate-800">Misi√≥n de Control üöÄ</h1>
      <p class="text-slate-500">Vista de Administrador - Solopreneur Ultra-Automatizado</p>
    </div>
    <div class="flex gap-2">
      <button (click)="refreshData()" class="px-4 py-2 bg-white border border-slate-300 rounded-lg hover:bg-slate-50">
        <i class="fa-solid fa-rotate-right"></i> Actualizar
      </button>
    </div>
  </header>

  <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
    
    <div class="bg-white p-6 rounded-2xl shadow-sm border-l-4" 
         [ngClass]="{
           'border-green-500': data.systemHealth.status === 'online',
           'border-red-500': data.systemHealth.status === 'offline',
           'border-yellow-500': data.systemHealth.status === 'degraded'
         }">
      <div class="flex items-center justify-between mb-2">
        <h3 class="font-bold text-slate-700">Salud del Sistema</h3>
        <span class="w-3 h-3 rounded-full animate-pulse"
              [ngClass]="{
                'bg-green-500': data.systemHealth.status === 'online',
                'bg-red-500': data.systemHealth.status === 'offline',
                'bg-yellow-500': data.systemHealth.status === 'degraded'
              }"></span>
      </div>
      <p class="text-2xl font-bold text-slate-800">
        {{ data.systemHealth.status | uppercase }}
      </p>
      <p class="text-xs text-slate-500 mt-1">
        Pipelines Fallidos: <span class="font-bold text-red-600">{{ data.systemHealth.failedPipelines }}</span>
      </p>
    </div>

    <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
      <div class="text-slate-500 text-sm mb-1">Ingresos (Mes)</div>
      <div class="text-2xl font-bold text-green-600">${{ data.businessMetrics.revenueMonth | number }}</div>
      <div class="text-xs text-green-700 bg-green-100 inline-block px-2 rounded mt-1">+12% vs mes anterior</div>
    </div>

    <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
      <div class="text-slate-500 text-sm mb-1">Nuevos Clientes</div>
      <div class="text-2xl font-bold text-blue-600">{{ data.businessMetrics.newClients }}</div>
      <div class="text-xs text-slate-400 mt-1">Tasa Conversi√≥n: {{ data.businessMetrics.conversionRate }}%</div>
    </div>

    <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 bg-gradient-to-br from-purple-500 to-indigo-600 text-white">
      <div class="text-purple-100 text-sm mb-1">Tareas Pendientes</div>
      <div class="text-4xl font-bold">{{ data.exceptionQueue.length }}</div>
      <div class="text-xs text-purple-200 mt-1">Requieren tu atenci√≥n humana</div>
    </div>

    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition relative overflow-hidden group">
    <div class="absolute top-0 right-0 bg-pink-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg">IA</div>
    
    <div class="w-12 h-12 bg-pink-100 text-pink-600 rounded-lg flex items-center justify-center text-xl mb-4 group-hover:scale-110 transition-transform">
        <i class="fa-brands fa-youtube"></i>
    </div>
    
    <h3 class="font-bold text-slate-800 text-lg">Marketing Autom√°tico</h3>
    <p class="text-sm text-slate-500 mt-2 mb-4">Genera videos y posts virales sobre tu negocio con un solo clic.</p>
    
    <button (click)="openMarketingModal()" class="w-full py-2 bg-gradient-to-r from-pink-600 to-purple-600 text-white font-bold rounded-lg hover:shadow-lg hover:opacity-90 transition">
        ‚ú® Crear Campa√±a
    </button>
</div>
  </div>

  <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
    <div class="p-6 border-b border-slate-100 flex justify-between items-center">
      <h2 class="font-bold text-lg text-slate-800">Cola de Excepciones</h2>
      <span class="text-xs bg-slate-100 text-slate-600 px-3 py-1 rounded-full">Prioridad Alta</span>
    </div>

    <div class="divide-y divide-slate-100">
      <div *ngFor="let task of data.exceptionQueue" class="p-6 hover:bg-slate-50 transition flex items-center gap-4">
        
        <div class="w-12 h-12 rounded-full flex items-center justify-center text-xl shrink-0"
             [ngClass]="{
               'bg-red-100 text-red-600': task.type === 'monitoring_alert', 
               'bg-orange-100 text-orange-600': task.type === 'ticket_l2',
               'bg-yellow-100 text-yellow-600': task.type === 'payment_failed',
               'bg-blue-100 text-blue-600': task.type === 'validation_call'
             }">
             <i class="fa-solid" 
             [ngClass]="{
               'fa-server': task.type === 'monitoring_alert',
               'fa-headset': task.type === 'ticket_l2',
               'fa-credit-card': task.type === 'payment_failed',
               'fa-phone': task.type === 'validation_call'
             }"></i>
        </div>

        <div class="flex-grow">
          <div class="flex items-center gap-2 mb-1">
            <span class="px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide"
                  [ngClass]="{
                    'bg-red-600 text-white': task.priority === 'critical',
                    'bg-orange-500 text-white': task.priority === 'high',
                    'bg-blue-500 text-white': task.priority === 'normal'
                  }">
              {{ task.priority }}
            </span>
            <span class="text-xs text-slate-400">{{ task.timestamp | date:'short' }}</span>
          </div>
          <h3 class="font-bold text-slate-800">{{ task.title }}</h3>
          <p class="text-sm text-slate-500">Cliente: {{ task.clientName }}</p>
        </div>

        <button (click)="resolveTask(task)" class="px-4 py-2 border border-slate-300 rounded-lg text-sm font-medium hover:bg-slate-800 hover:text-white transition">
          Resolver
        </button>
      </div>

      <div *ngIf="data.exceptionQueue.length === 0" class="p-12 text-center text-slate-400">
        <i class="fa-solid fa-mug-hot text-4xl mb-4"></i>
        <p>Todo limpio. El sistema est√° operando en piloto autom√°tico.</p>
      </div>
    </div>
  </div>
</div>